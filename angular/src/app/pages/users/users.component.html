<div class="page">
  <div class="header">
    <h2>All Users</h2>
    <a routerLink="/users/new" class="add-btn">+ Add User</a>
  </div>

  @if (result$ | async; as result) {
    @if (result.loading) {
      <p class="loading">Loading...</p>
    } @else if (result.error) {
      <p class="error">{{ result.error.message }}</p>
    } @else if (result.data && result.data.users) {
      <div class="cards">
        @for (user of result.data.users; track user.id) {
          <article class="card">
            <div class="card-body">
              <h3 class="card-name">{{ user.name }}</h3>
              <p class="card-username">&#64;{{ user.username }}</p>
              <div class="card-meta">
                <span class="card-age">{{ user.age }} years</span>
                <span class="card-sep">Â·</span>
                <span class="card-nationality">{{ user.nationality }}</span>
              </div>
            </div>
            <div class="card-actions">
              <a [routerLink]="['/users', user.id, 'edit']" class="card-link">Edit</a>
            </div>
          </article>
        }
      </div>
    } @else {
      <pre class="raw">{{ result.data | json }}</pre>
    }
  }
</div>
